{"name":"Ratelimit.js","tagline":"NodeJS library for rate limiting using sliding windows stored in Redis","body":"RateLimit.js\r\n============\r\n[![Build\r\nStatus](https://travis-ci.org/dudleycarr/ratelimit.js.svg)](https://travis-ci.org/dudleycarr/ratelimit.js)\r\n\r\nA NodeJS library for rate limiting using sliding windows stored in Redis.\r\n\r\n### Express Middleware\r\n\r\nConstruct rate limiter and middleware instances:\r\n\r\n```javascript\r\nvar RateLimit = require('ratelimit.js').RateLimit;\r\nvar ExpressMiddleware = require('ratelimit.js').ExpressMiddleware;\r\nvar redis = require('redis');\r\n\r\nvar rateLimiter = new RateLimit(redis.createClient(), [{interval: 1, limit: 10}]);\r\nvar limitMiddleware = new ExpressMiddleware(rateLimiter);\r\n```\r\n\r\nRate limit every endpoint of an express application:\r\n\r\n```javascript\r\napp.use(limitMiddleware.trackRequests());\r\n\r\napp.use(limitMiddleware.checkRequest(function(req, res, next) {\r\n  res.status(429).json({message: 'rate limit exceeded'});\r\n}));\r\n```\r\n\r\nRate limit specific endpoints:\r\n\r\n```javascript\r\napp.use(limitMiddleware.trackRequests());\r\n\r\nvar limitEndpoint = limitMiddleware.checkRequest(function(req, res, next) {\r\n  res.status(429).json({message: 'rate limit exceeded'});\r\n});\r\n\r\napp.get('/rate_limited', limitEndpoint, function(req, res, next) {\r\n  // request is not rate limited...\r\n});\r\n\r\napp.post('/another_rate_limited', limitEndpoint, function(req, res, next) {\r\n  // request is not rate limited...\r\n});\r\n```\r\n\r\nDon't want to deny requests that are rate limited? Not sure why, but go ahead:\r\n\r\n```javascript\r\napp.use(limitMiddleware.trackRequests());\r\n\r\napp.use(limitMiddleware.checkRequest(function(req, res, next) {\r\n  req.rateLimited = true;\r\n  next();\r\n}));\r\n```\r\n\r\nUse a custom IP extraction function:\r\n\r\n```javascript\r\nfunction extractIps(req) {\r\n  return req.ips;\r\n}\r\n\r\napp.use(limitMiddleware.trackRequests(extractIps));\r\n\r\napp.use(limitMiddleware.checkRequest(extractIps, function(req, res, next) {\r\n  res.status(429).json({message: 'rate limit exceeded'});\r\n}));\r\n```\r\n\r\nNote: this is helpful if your application sits behind a proxy (or set of proxies).\r\n[Read more about express, proxies and req.ips here](http://expressjs.com/guide/behind-proxies.html).\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}